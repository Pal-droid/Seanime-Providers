/* FEED STYLES */
#activity-stories-feed {
z-index: 20; position: relative; box-sizing: border-box; width: 100%; max-width: 1300px; margin: 16px auto 24px auto;
padding: 0; border-radius: 12px; font-family: "Inter", sans-serif; animation: slideInDown 0.4s ease-out;
min-height: 120px; display: flex; flex-direction: column; justify-content: center;
}
​.box-header { margin-bottom: 12px; font-weight: 600; font-size: 1rem; display: flex; justify-content: space-between; align-items: center; padding: 16px 16px 0 16px; }
.action-btn { font-size: 0.75rem; color: #9CA3AF; cursor: pointer; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 4px 10px; border-radius: 12px; transition: all 0.2s; }
.action-btn:hover { background: rgba(255,255,255,0.15); color: white; border-color: rgba(255,255,255,0.3); }
​.stories-container { display: flex; overflow-x: auto; gap: 20px; padding: 0 16px 5px 16px; scrollbar-width: none; }
.stories-container::-webkit-scrollbar { display: none; }
.story-item { flex-shrink: 0; display: flex; flex-direction: column; align-items: center; cursor: pointer; text-align: center; max-width: 65px; transition: transform 0.2s; }
.story-ring { width: 64px !important; height: 64px !important; padding: 0; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 8px; transition: transform 0.2s; border: none; position: relative; }
.story-svg-ring { position: absolute; top: 0; left: 0; transform: rotate(-90deg); transform-origin: center center; width: 100% !important; height: 100% !important; }
.story-image { width: 54px !important; height: 54px !important; border-radius: 50%; object-fit: cover; z-index: 1; }
.story-name { font-size: 0.75rem; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%; }
​@media (min-width: 768px) {
.stories-container { gap: 30px; padding: 0 24px 5px 24px; scrollbar-width: thin; scrollbar-color: #6B7280 #1F2937; }
.stories-container::-webkit-scrollbar { height: 8px; display: block; }
.story-item { max-width: 80px; }
.story-ring { width: 80px !important; height: 80px !important; margin-bottom: 10px; }
.story-image { width: 70px !important; height: 70px !important; }
.story-name { font-size: 0.85rem; }
#activity-stories-feed { padding-top: 24px; padding-bottom: 24px; }
.box-header { padding: 0 24px 0 24px; }
}
​.token-form { display: flex; flex-direction: column; align-items: center; width: 100%; gap: 10px; padding: 0 16px 16px 16px;}
.token-input { background: rgba(0,0,0,0.3); border: 1px solid #4B5563; color: white; padding: 8px 12px; border-radius: 6px; width: 80%; max-width: 300px; font-size: 0.9rem; }
.token-input:focus { outline: none; border-color: #3DB4F2; box-shadow: 0 0 0 1px #3DB4F2; }
.token-btn { background: #6366F1; color: white; border: none; padding: 8px 16px; border-radius: 6px; font-weight: 600; cursor: pointer; transition: background 0.2s; }
.token-btn:hover { background: #4F46E5; }
.token-help { font-size: 0.8rem; color: #9CA3AF; text-align: center; }
.token-help a { color: #8B5CF6; text-decoration: underline; }
.state-msg { text-align: center; color: #9CA3AF; width: 100%; padding: 0 16px 16px 16px; }
.error-msg { color: #F87171; margin-bottom: 8px; font-size: 0.9rem; }
​/* VIEWER STYLES */
#story-viewer-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: none; flex-direction: column; user-select: none; }
#story-viewer-overlay.is-open { display: flex; animation: fadeIn 0.2s; }
​.sv-background { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; transition: background-image 0.5s ease; filter: blur(40px) brightness(0.7); transform: scale(1.05); }
.sv-content { position: relative; z-index: 2; width: 100%; height: 100%; display: flex; flex-direction: column; }
.sv-progress-container { display: flex; gap: 4px; padding: 12px 10px; width: 100%; box-sizing: border-box; }
.sv-progress-bar { flex: 1; height: 3px; background: rgba(255,255,255,0.3); border-radius: 2px; overflow: hidden; }
.sv-progress-fill { height: 100%; background: #fff; width: 0%; transition: width 0.1s linear; }
.sv-progress-bar.completed .sv-progress-fill { width: 100%; }
.sv-header { display: flex; align-items: center; padding: 0 16px; margin-top: 4px; height: 50px; }
.sv-avatar { width: 32px; height: 32px; border-radius: 50%; margin-right: 10px; border: 1px solid rgba(255,255,255,0.2); }
.sv-username { color: white; font-weight: 600; font-size: 0.9rem; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }
.sv-close { margin-left: auto; color: white; background: none; border: none; font-size: 1.5rem; cursor: pointer; padding: 5px; opacity: 0.8; }
.sv-body { flex: 1; display: flex; align-items: center; justify-content: center; position: relative; }
.sv-card-wrapper { position: relative; width: 85%; max-height: 60vh; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
.sv-card-img { width: 100%; height: 100%; object-fit: cover; border-radius: 12px; }
​/* FIXED: The Redirect Button now has a lower Z-index than the reply modal (10) */
.sv-redirect-btn {
position: absolute; top: 10px; right: 10px;
z-index: 5;
background: rgba(0, 0, 0, 0.4); border: none; color: white;
padding: 8px; border-radius: 8px; cursor: pointer; transition: opacity 0.2s;
font-size: 1.2rem; display: flex; align-items: center; justify-content: center;
opacity: 1;
}
#reply-modal.is-visible ~ .sv-body .sv-redirect-btn { pointer-events: none; opacity: 0; }
​.sv-footer { padding: 20px; padding-bottom: 40px; color: white; text-align: center; }
.sv-text-main { font-size: 1.1rem; font-weight: 600; margin-bottom: 4px; text-shadow: 0 1px 4px rgba(0,0,0,0.8); }
.sv-text-sub { font-size: 0.9rem; font-weight: 400; margin-bottom: 4px; text-shadow: 0 1px 4px rgba(0,0,0,0.8); }
.sv-nav-left, .sv-nav-right { position: absolute; top: 0; bottom: 0; z-index: 3; cursor: pointer; background: transparent; }
.sv-nav-left { left: 0; width: 30%; }
.sv-nav-right { right: 0; width: 70%; }
​@keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }
@keyframes slideOutRight { from { transform: translateX(0); } to { transform: translateX(100%); } }
@keyframes slideInLeft { from { transform: translateX(-100%); } to { transform: translateX(0); } }
@keyframes slideOutLeft { from { transform: translateX(0); } to { transform: translateX(-100%); } }
​#reply-modal { position: absolute; top: 0; width: 100%; max-width: 400px; height: 100%; background: rgba(0,0,0,0.95); z-index: 100; display: none; flex-direction: column; padding: 10px; box-sizing: border-box; }
#reply-modal.is-visible { display: flex; }
#reply-modal.pos-right { right: 0; left: auto; }
#reply-modal.pos-left { left: 0; right: auto; }
@media (max-width: 768px) { #reply-modal { max-width: 100%; left: 0 !important; right: 0 !important; } }
​.reply-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1); }
.reply-list { flex-grow: 1; overflow-y: auto; padding: 10px 0; }
.reply-item { display: flex; gap: 10px; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); }
.reply-avatar { width: 30px; height: 30px; border-radius: 50%; object-fit: cover; }
.reply-text { color: white; font-size: 0.9rem; line-height: 1.4; }
​#reply-input-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10000; display: none; justify-content: center; align-items: center; }
#reply-input-modal.is-open { display: flex; }
.input-modal-card { background: #151f2e; border-radius: 12px; width: 90%; max-width: 450px; padding: 20px; color: white; display: flex; flex-direction: column; gap: 15px; }
.reply-textarea { width: 100%; min-height: 100px; padding: 10px; border-radius: 8px; background: #1F2937; color: white; resize: none; }